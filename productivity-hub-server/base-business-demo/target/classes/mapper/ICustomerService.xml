<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pbad.customer.mapper.BankCardMapper">

    <resultMap id="baseRuleResultMap" type="com.pbad.customer.domain.po.BankCardPO">
        <id column="bank_card_id" property="bankCardId"/>
        <result column="bank_card_no" property="bankCardNo"/>
        <result column="bank_card_name" property="bankCardName"/>
        <result column="address" property="address"/>
        <result column="money" property="money"/>
        <result column="bind_stat" property="bindStat"/>
        <result column="customer_id" property="customerId"/>
        <result column="create_by" property="createBy"/>
        <result column="create_time" property="createTime"/>
        <result column="update_by" property="updateBy"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <sql id="Base_Column_List">
        bank_card_id,
        bank_card_no,
        customer_id,
        bank_card_name,
        address,money,
        bind_stat,
        create_by,
        create_time,
        update_by,
        update_time
    </sql>

    <select id="selectByCardNo" resultMap="baseRuleResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM mall_bank_card
        where bank_card_no = #{bankCardNo}
    </select>

    <select id="selectByCustomerId" resultMap="baseRuleResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM mall_bank_card
        where customer_id = #{customerId}
    </select>

    <select id="selectByQuery" resultMap="baseRuleResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM mall_bank_card
        <include refid="where"/>
    </select>

    <insert id="batchInsert" parameterType="java.util.List">
        INSERT INTO mall_bank_card (
        bank_card_no,bank_card_name,address,money,customer_id,
        bind_stat,create_by,create_time,update_by,update_time
        ) VALUES
        <foreach collection="list" item="item" separator=",">
            (
            #{item.bankCardNo}, #{item.bankCardName}, #{item.address}, #{item.money},#{item.customerId},
            #{item.bindStat},#{item.createBy},#{item.createTime},#{item.updateBy},#{item.updateTime}
            )
        </foreach>
    </insert>

    <update id="deleteByQuery">
        update mall_bank_card
        set del_flag = '1'
        <include refid="where"/>
    </update>

    <sql id="where">
        <where>
            1 = 1
            <if test="bankCardNo != null">AND bank_card_no = #{bankCardNo}</if>
            <if test="bindStat != null">AND bind_stat = #{bindStat}</if>
            <if test="customerId != null">AND customer_id = #{customerId}</if>
            <if test="bankCardNoList != null">
                AND bank_card_no in
                <foreach collection="bankCardNoList" item="item" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
        </where>
    </sql>

</mapper>