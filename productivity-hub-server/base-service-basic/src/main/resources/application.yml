# 基础配置 - 所有环境共享的配置
spring:
  application:
    name: base-service-basic
  # 默认激活本地环境，生产环境通过 --spring.profiles.active=prod 或环境变量 SPRING_PROFILES_ACTIVE=prod 指定
  profiles:
    active: prod

# 分页插件配置 - 框架级配置，所有环境共享
pagehelper:
  helper-dialect: mysql
  reasonable: true
  support-methods-arguments: true
  params: count=countSql

# 通用业务配置 - 所有环境共享
common:
  web:
    exclude-paths: /api/auth/login,/api/auth/captcha

# 限流配置
rate-limit:
  enabled: true  # 是否启用限流（默认：true）
  user:
    qps: 500     # 用户级别QPS限制（已放宽：从100增加到500）
  api:
    qps: 5000    # 接口级别QPS限制（已放宽：从1000增加到5000）
  ip:
    qps: 200     # IP级别QPS限制（已放宽：从50增加到200）

# 熔断器配置
circuit-breaker:
  enabled: true           # 是否启用熔断（默认：true）
  error-threshold: 0.5     # 错误率阈值（0.5表示50%）
  timeout: 5000            # 超时时间（毫秒）
  half-open-requests: 10   # 半开状态尝试恢复的请求数
  open-duration: 60000     # 熔断持续时间（毫秒，默认1分钟）

# Actuator监控配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized
  metrics:
    export:
      prometheus:
        enabled: true
